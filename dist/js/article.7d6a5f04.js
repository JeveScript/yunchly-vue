(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["article"],{"00bc":function(t,e,n){},"0ccb":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("h3",{staticClass:"title"},[t._v("增加一个文章")]),n("form",{staticClass:"article-form"},[n("span",{staticClass:"text-title"},[t._v("标题")]),n("el-input",{staticClass:"text-input",attrs:{placeholder:"请输入名称"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),n("div",{staticClass:"image-title"},[t._v("内容：")]),n("div",{staticStyle:{height:"500px"}},[n("quill-editor",{ref:"myQuillEditor",staticClass:"quill-editor",staticStyle:{height:"400px"},attrs:{options:t.editorOption},model:{value:t.contentUrl,callback:function(e){t.contentUrl=e},expression:"contentUrl"}})],1),n("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.handleCreate}},[t._v("添加")])],1)},a=[],l=n("d85d"),s=n("2895"),c=(n("a753"),n("8096"),n("14e1"),n("953d")),o={name:"image_url",size:500,accept:"image/png, image/gif, image/jpeg",QINIU_API:"http://upload-z2.qiniup.com"},r=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]],u={image:function(){var t=this,e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept",o.accept),e.classList.add("ql-image"),e.addEventListener("change",(function(){var n=e.files[0];o.size&&n.size>=1024*o.size?e.value="":l["a"].upload(n).then((function(e){var n=t.quill.getSelection(!0).index;t.quill.insertEmbed(n,"image",e),t.quill.setSelection(n+1)}))})),e.click()}},d={data:function(){return{contentUrl:"",title:"",editorOption:{modules:{toolbar:{container:r,handlers:u}}}}},methods:{handleCreate:function(){var t=this;if(this.contentUrl&&this.title){var e={content:this.contentUrl,title:this.title};s["a"].insert(e).then((function(e){200===e.code?t.$router.push({name:"article"}):t.$message({message:e.message,type:"warning"})}))}else this.$message({message:"缺少必要参数",type:"warning"})}},components:{"quill-editor":c["quillEditor"]}},p=d,f=(n("cead"),n("2877")),m=Object(f["a"])(p,i,a,!1,null,"d2a23e64",null);e["default"]=m.exports},2895:function(t,e,n){"use strict";var i=n("9d94"),a=n("8088"),l={list:function(){return i["a"].get(a["a"].article)},insert:function(t){return i["a"].post(a["a"].article,t)},single:function(t){return i["a"].get(a["a"].articleItem(t))},update:function(t,e){return i["a"].put(a["a"].articleItem(t),e)},delete:function(t){return i["a"].delete(a["a"].articleItem(t))}};e["a"]=l},"2e08":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("el-button",{staticClass:"btn",attrs:{type:"text"},on:{click:t.handleEditContent}},[t._v("确认修改")]),n("div",{staticStyle:{height:"500px"}},[n("quill-editor",{ref:"myQuillEditor",staticClass:"quill-editor",staticStyle:{height:"400px"},attrs:{options:t.editorOption},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)],1)},a=[],l=n("2895"),s=n("d85d"),c=(n("a753"),n("8096"),n("14e1"),n("953d")),o={name:"image_url",size:500,accept:"image/png, image/gif, image/jpeg",QINIU_API:"http://upload-z2.qiniup.com"},r=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]],u={image:function(){var t=this,e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept",o.accept),e.classList.add("ql-image"),e.addEventListener("change",(function(){var n=e.files[0];o.size&&n.size>=1024*o.size?e.value="":s["a"].upload(n).then((function(e){var n=t.quill.getSelection(!0).index;t.quill.insertEmbed(n,"image",e),t.quill.setSelection(n+1)}))})),e.click()}},d={data:function(){return{content:"",editorOption:{modules:{toolbar:{container:r,handlers:u}}}}},created:function(){this.onload()},methods:{onload:function(){var t=this,e=this.$route.params.id;l["a"].single(e).then((function(e){t.content=e.data.content}))},handleEditContent:function(){var t=this,e=this.content,n=this.$route.params.id;l["a"].update(n,{content:e}).then((function(n){200===n.code?t.content=e:console.log(n.message)}))}},components:{"quill-editor":c["quillEditor"]}},p=d,f=(n("6b74"),n("2877")),m=Object(f["a"])(p,i,a,!1,null,"767f43b6",null);e["default"]=m.exports},"6b74":function(t,e,n){"use strict";var i=n("eb65"),a=n.n(i);a.a},"72e1":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("el-button",{on:{click:function(e){return t.handleAdd()}}},[t._v("添加 ")]),n("el-row",{attrs:{gutter:20}},t._l(t.articleData,(function(e){return n("el-col",{key:e.id,attrs:{span:6}},[n("el-card",{staticClass:"el-card",attrs:{"body-style":{padding:"20px 0 0 0"}}},[n("div",{staticClass:"article-title"},[t._v(t._s(e.title))]),n("div",{staticClass:"bottom"},[n("el-button",{staticClass:"btn",attrs:{type:"text",size:"small"},on:{click:function(n){return t.handleTitle(e.id)}}},[t._v(" 修改标题 ")]),n("el-button",{staticClass:"btn",attrs:{type:"text",size:"small"},on:{click:function(n){return t.handleSee(e.id)}}},[t._v(" 修改内容 ")]),n("el-button",{staticClass:"btn",attrs:{type:"text",size:"small"},on:{click:function(n){return t.handleDelete(e.id)}}},[t._v(" 删除文章 ")])],1)])],1)})),1)],1)},a=[],l=n("2895"),s={data:function(){return{articleData:[]}},created:function(){this.onload()},methods:{onload:function(){var t=this;l["a"].list().then((function(e){t.articleData=e.data}))},handleAdd:function(){this.$router.push({name:"articleCreate"})},handleSee:function(t){this.$router.push({name:"articleSingle",params:{id:t}})},handleDelete:function(t){var e=this;this.$confirm("此操作将永久删除该文章, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l["a"].delete(t).then((function(t){200!==t.code?e.$message.error(t.message):(e.$message({type:"success",message:t.message}),e.onload())}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleTitle:function(t){var e=this,n=this.$createElement;this.$msgbox({title:"修改标题",message:n("p",null,[n("span",null,"输入文章名称： ")]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",showInput:!0}).then((function(n){n.value?l["a"].update(t,{title:n.value}).then((function(t){200===t.code?e.onload():console.log(t.message)})):e.$message.error("值不能为空")})).catch((function(){e.$message({type:"info",message:"已取消修改"})}))}}},c=s,o=(n("adac"),n("2877")),r=Object(o["a"])(c,i,a,!1,null,"dec0f0c8",null);e["default"]=r.exports},"8e28":function(t,e,n){},adac:function(t,e,n){"use strict";var i=n("00bc"),a=n.n(i);a.a},cead:function(t,e,n){"use strict";var i=n("8e28"),a=n.n(i);a.a},d85d:function(t,e,n){"use strict";n("0d03"),n("b0c0"),n("d3b7");var i=n("9d94"),a=n("8088"),l={qiniu:function(){return i["a"].get(a["a"].qiniuToken)},upload:function(t){var e=this;return new Promise((function(n){e.qiniu().then((function(e){var l="yunchly/"+Date.now()+"_"+t.name,s=e.token,c=e.domain,o=new FormData;o.append("file",t),o.append("key",l),o.append("token",s),i["a"].post(a["a"].qiniu_API,o,{headers:{"Content-Type":"multiple/form-data"}}).then((function(t){var e=c+t.key;n(e)}))}))}))}};e["a"]=l},eb65:function(t,e,n){}}]);
//# sourceMappingURL=article.7d6a5f04.js.map